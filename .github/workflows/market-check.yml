name: Market Hours Check

on:
  # Run manually anytime
  workflow_dispatch:
    inputs:
      timezone:
        description: 'Your timezone'
        required: true
        type: choice
        default: 'America/New_York'
        options:
          - 'America/New_York'
          - 'America/Los_Angeles'
          - 'America/Chicago'
          - 'America/Toronto'
          - 'Europe/London'
          - 'Europe/Paris'
          - 'Europe/Berlin'
          - 'Asia/Tokyo'
          - 'Asia/Hong_Kong'
          - 'Asia/Singapore'
          - 'Australia/Sydney'
          - 'UTC'
      exchanges:
        description: 'Exchanges to check'
        required: true
        type: choice
        default: 'NYSE,NASDAQ,LSE,JPX'
        options:
          - 'NYSE,NASDAQ'
          - 'NYSE,NASDAQ,LSE,JPX'
          - 'NYSE,NASDAQ,LSE,JPX,XETRA,HKEX,ASX,TSX'
          - 'NYSE'
          - 'NASDAQ'
          - 'LSE'
          - 'JPX'
          - 'XETRA'
          - 'HKEX'
          - 'ASX'
          - 'TSX'

  # Or run on a schedule (uncomment and customize)
  # schedule:
  #   - cron: '0 8 * * 1-5'  # 8 AM UTC, weekdays

jobs:
  check-market-hours:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install dependencies
        run: npm install

      - name: Check market hours
        env:
          TIMEZONE: ${{ github.event.inputs.timezone || 'America/New_York' }}
          EXCHANGES: ${{ github.event.inputs.exchanges || 'NYSE,NASDAQ,LSE,JPX' }}
        run: npm run check
